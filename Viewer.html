<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ball Trajectory Visualization</title>
    <style>
        .svg_traj {
            stroke: #333;
            stroke-width: 2;
        }

        .svg_point {
            fill: #333;
            stroke: #333;
            stroke-width: 1;
        }

        .svg_mask_traj {
            stroke: #ff0000;
            stroke-width: 10;
            stroke-dasharray: 5,5;
        }

        .svg_mask_point {
            fill: #ff0000;
            stroke: #ff0000;
            stroke-width: 2;
        }

        .floating_ball {
            fill: #00ff00;
            stroke: #006600;
            stroke-width: 2;
        }

        svg {
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<svg viewBox="0 0 600 400" width="600" height="400">
    <g id="svg_ball_bottom"></g>
    <g id="svg_ball_middle"></g>
    <g id="svg_ball_top"></g>

    <g id="svg_traj"></g>
</svg>

<script type="module">
    import { Segment, Point } from './Path.js';
    import { NormalAnimation } from './NormalAnimator.js';
    import { DOMBallAnimator } from './DOMBall.js';
    import { DOMPathRenderer } from './DOMPath.js';
    import { Styler } from "./Styler.js"

    // Example usage - create a sample path
    const path = [
        new Segment(new Point(50, 50), new Point(150, 50), 1),
        new Segment(new Point(150, 50), new Point(250, 150), 1),
        new Segment(new Point(250, 150), new Point(350, 200), 1),
        new Segment(new Point(350, 200), new Point(450, 250), 1)
    ];

    const params = {
        countFrom: 0,
        countTo: -1,
        distance: 150,
        invert: false
    }

    // Process path
    let na = new NormalAnimation(new DOMPathRenderer(), new DOMBallAnimator(), Styler)
    na.Configure(path, params)
    na.Load();

    // Add floating ball that follows cursor
    // const floatingBall = document.getElementById('floating_ball');
    // const svgElement = document.querySelector('svg');
    //
    // svgElement.addEventListener('mousemove', (event) => {
    //     const svgPoint = svgElement.createSVGPoint();
    //     svgPoint.x = event.clientX;
    //     svgPoint.y = event.clientY;
    //     const transformedPoint = svgPoint.matrixTransform(svgElement.getScreenCTM().inverse());
    //
    //     floatingBall.setAttribute('cx', transformedPoint.x);
    //     floatingBall.setAttribute('cy', transformedPoint.y);
    // });
</script>
</body>
</html>