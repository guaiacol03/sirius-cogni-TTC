<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ball Trajectory Visualization</title>
    <style>
        .svg_traj {
            stroke: #333;
            stroke-width: 2;
        }

        .svg_point {
            fill: #333;
            stroke: #333;
            stroke-width: 1;
        }

        .svg_mask_traj {
            stroke: #ff0000;
            stroke-width: 10;
            stroke-dasharray: 5,5;
        }

        .svg_mask_point {
            fill: #ff0000;
            stroke: #ff0000;
            stroke-width: 2;
        }

        .floating_ball {
            fill: #00ff00;
            stroke: #006600;
            stroke-width: 2;
        }

        svg {
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<svg viewBox="0 0 600 400" width="600" height="400">
    <g id="svg_ball_bottom"></g>
    <g id="svg_ball_middle">
        <circle id="floating_ball" class="floating_ball" cx="300" cy="200" r="15" />
    </g>
    <g id="svg_ball_top"></g>
    <g id="svg_traj"></g>
</svg>

<script type="module">
    import { Segment, Point } from './Path.js';
    import { Styler, NormalAnimation } from './DOMBall.js';
    import { DOMPathRenderer } from './DOMPath.js';

    // Example usage - create a sample path
    const path = [
        new Segment(new Point(50, 50), new Point(150, 50), 1),
        new Segment(new Point(150, 50), new Point(250, 150), 1),
        new Segment(new Point(250, 150), new Point(350, 200), 1),
        new Segment(new Point(350, 200), new Point(450, 250), 1)
    ];

    const params = {
        countFrom: 0,
        countTo: -1,
        distance: 150,
        invert: true
    }

    // Process path
    let na = new NormalAnimation(null, null, Styler)
    na.RebuildPath(path, params)

    // Create renderer and draw
    const renderer = new DOMPathRenderer();
    renderer.Update(na.path);

    // Add floating ball that follows cursor
    const floatingBall = document.getElementById('floating_ball');
    const svgElement = document.querySelector('svg');

    svgElement.addEventListener('mousemove', (event) => {
        const svgPoint = svgElement.createSVGPoint();
        svgPoint.x = event.clientX;
        svgPoint.y = event.clientY;
        const transformedPoint = svgPoint.matrixTransform(svgElement.getScreenCTM().inverse());

        floatingBall.setAttribute('cx', transformedPoint.x);
        floatingBall.setAttribute('cy', transformedPoint.y);
    });
</script>
</body>
</html>